# Gear_Transmission_Project
二级齿轮传动系统参数优化。这是一个用于二级齿轮传动系统参数优化，项目针对给定电机规格和尺寸等约束，确定最佳齿轮参数。

## 当前程序中的约束条件如下：
一、硬约束（不满足则直接跳过该方案）

1. 齿数约束（防根切）齿数必须 ≥ 17（避免根切）
python
if z1 < 17 or z2 < 17 or z3 < 17 or z4 < 17:
    return None
2. 轴距有效性约束
python
if wheelbase1 <= 0 or wheelbase2 <= 0:
    return None

3. 电机转速约束
python
if desired_motor_speed > max_motor_speed:  # max_motor_speed = 3500 rpm
    return None

4. 输出扭矩约束
python
if actual_output_torque < output_torque:  # output_torque = 7 Nm
    return None

5. 包络尺寸约束（径向），齿轮直径都小于电机直径
python
if max(D2_real, D4_real) > motor_D:  # motor_D = 75 mm
    return None

6. 齿轮间隙约束（轴向装配）
python
if (D1_real - D3_real) < 1:
    return None
一级主动轮D1必须比二级主动轮D3大至少1mm（避免干涉）

二、材质约束（强度校核）
行为取决于 MATERIAL_MODE 设置：
模式:'auto';软约束 - 自动选择强度足够的材料。如果没有材料满足，则尝试所有材质，选择第一个suitable的；如果都没有则跳过该方案
模式:指定材质 ('steel'/'peek'/'pom'/'nylon');硬约束 - 只校核该材质，若不满足强度要求则直接跳过该方案
材质校核内容：
弯曲强度校核：max_sigma_F ≤ sigma_F_allow（许用应力）
齿根厚校核：sf/m ≥ sf_min_ratio（材料相关最小齿根厚比例）

## Debug传动比窗口过窄
用于校验齿轮直径是否合适，计算传动比窗口
依据，最小最小传动比（扭矩约束），以及最大允许传动比（转速约束），查看可接受范围是否过窄。


## results:
```

============================================================
齿轮传动优化设计程序
============================================================
搜索空间: 3,891,888 种组合
步长: 2 mm
第一级齿宽系数: (8, 10, 12)
第二级齿宽系数: (8, 10, 12)
优化目标: 重量最轻
材料校核模式: 硬约束 (必须满足指定材质)
  第一级: z1=steel, z2=peek_cf30
  第二级: z3=steel, z4=steel
应力比约束: 硬约束 (最大应力比 < 0.50)

进度: 3890000/3891888 (100.0%) | 可行: 13572 | ETA: 0s

【约束失败统计】
  齿数不足:  1,651,104 (42.6%)
  转速超限:  148,446 (3.8%)
  扭矩不足:  1,918,170 (49.5%)
  包络约束:  126,855 (3.3%)
  间隙约束:  33,741 (0.9%)
  材料强度:  0 (0.0%)
  硬约束材质不满足: 0 (0.0%)
  应力比超限(>0.5): 0 (0.0%)

搜索完成!
  总耗时: 2.0 秒
  可行方案: 13572/3891888

╔══════════════════════════════════════════════════════════╗
║                       两级齿轮传动优化设计报告                       ║
╚══════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────┐
│                         电机参数                         │
├──────────────────────────────────────────────────────┤
│ 电机扭矩: 0.7 N·m
│ 电机最大转速: 4000 rpm
│ 电机直径: 75 mm
│ 电机重量: 300 g
└──────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────┐
│                        目标输出性能                        │
├──────────────────────────────────────────────────────┤
│ 输出扭矩要求: ≥ 6.0 N·m
│ 输出转速要求: 350 rpm
│ 所需传动比: 9.50 ~ 11.43
└──────────────────────────────────────────────────────┘

▶ 【优化目标】重量最轻
▶ 【选定材质】合金钢 (20CrMnTi) + PEEK-CF30 (碳纤维增强)

┌──────────────────────────────────────────────────────┐
│                      第一级 (高速级)                       │
├──────────────────────────────────────────────────────┤
│  类型: 斜齿轮 (螺旋角=15.0°), 重合度 ε = 2.52
│  模数 m1 = 0.6 mm, 齿距 p1 = 1.885 mm
│  齿顶高 = 0.60 mm, 齿根高 = 0.75 mm, 总齿高 = 1.35 mm
│  齿宽系数 = 8, 轴向厚度(齿宽) = 4.80 mm
│  危险截面齿根宽 sf1 = 0.340 mm (sf/m = 0.566)
│  齿顶修缘系数 = 0.02, 修缘量 = 0.012 mm ✓降噪
│
│  主动轮: 齿数 z1 = 33, 分度圆直径 D1 = 19.80 mm, 齿轮厚度 = 4.80 mm
│          材质: 合金钢 (20CrMnTi), 齿顶修缘 = 0.012 mm
│          齿根圆直径 = 18.30 mm
│          输入扭矩 = 0.700 N·m
│  从动轮: 齿数 z2 = 120, 分度圆直径 D2 = 72.00 mm, 齿轮厚度 = 4.80 mm
│          材质: PEEK-CF30 (碳纤维增强), 齿顶修缘 = 0.012 mm
│          齿根圆直径 = 70.50 mm
│          输出扭矩 = 2.418 N·m
│  传动比 i1 = 3.636
│
│                      第二级 (低速级)                       │
├──────────────────────────────────────────────────────┤
│  类型: 直齿轮, 重合度 ε = 1.64
│  模数 m2 = 0.8 mm, 齿距 p2 = 2.513 mm
│  齿顶高 = 0.80 mm, 齿根高 = 1.00 mm, 总齿高 = 1.80 mm
│  齿宽系数 = 8, 轴向厚度(齿宽) = 6.40 mm
│  危险截面齿根宽 sf2 = 0.453 mm (sf/m = 0.566)
│  齿顶修缘系数 = 0.02, 修缘量 = 0.016 mm ✓降噪
│
│  主动轮: 齿数 z3 = 18, 分度圆直径 D3 = 14.40 mm, 齿轮厚度 = 6.40 mm
│          材质: 合金钢 (20CrMnTi), 齿顶修缘 = 0.016 mm
│          齿根圆直径 = 12.40 mm
│          输入扭矩 = 2.418 N·m
│  从动轮: 齿数 z4 = 48, 分度圆直径 D4 = 38.40 mm, 齿轮厚度 = 6.40 mm
│          材质: 合金钢 (20CrMnTi), 齿顶修缘 = 0.016 mm
│          齿根圆直径 = 36.40 mm
│          输出扭矩 = 6.126 N·m
│  传动比 i2 = 2.667
└──────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────┐
│                         总体性能                         │
├──────────────────────────────────────────────────────┤
│  总减速比: 9.697
│  实际齿数配比: (33:120) × (18:48)
│  输出转速: 350 rpm (固定目标值)
│  期望电机转速: 3393.9 rpm (约束: <= 4000 rpm) 【✓ 满足】
│  输出扭矩: 6.126 Nm (要求 >= 6.0 Nm) 【✓ 满足】
└──────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────┐
│                        尺寸与重量                         │
├──────────────────────────────────────────────────────┤
│ 轴距参数:
│   第一级中心距 (电机轴-中间轴): 45.90 mm
│   第二级中心距 (中间轴-输出轴): 26.40 mm
│ 齿轮轴向总厚度: 11.20 mm (两级齿轮厚度之和)
│ 总体轴向尺寸: 26.20 mm (齿轮厚度 + 轴承间隙15mm)
│ 最大径向尺寸: 72.00 mm (电机直径参考: 75 mm)
│
│ 纵向尺寸组成:
│   电机半径: 37.50 mm
│   D1/2 (一级主动轮半径): 9.90 mm
│   D2/2 (一级从动轮半径): 36.00 mm
│   D3/2 (二级主动轮半径): 7.20 mm
│   D4 (二级从动轮直径): 38.40 mm
│   总纵向尺寸:               109.80 mm 
│
│ 齿轮组重量: 52.7 g
│ 电机重量: 300 g
│ 系统总重量:               352.7 g (0.353 kg) ← 优化指标
└──────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────┐
│                        材料强度校核                        │
├──────────────────────────────────────────────────────┤
│ 选定材质: 合金钢 (20CrMnTi) + PEEK-CF30 (碳纤维增强)
│
│ 【各齿轮材料参数详情】
│ 齿轮  │ 材料名称              │ σ_f(MPa)│ sf_min │ 安全系数 │ 许用应力(MPa)
│ ────────────────────────────────────────────────────
│ z1(一级主动)│ 合金钢 (20CrMnTi)       │  600.0  │  0.30  │    2.0   │    300.0
│ z2(一级从动)│ PEEK-CF30 (碳纤维增强)    │  180.0  │  0.55  │    2.2   │     81.8
│ z3(二级主动)│ 合金钢 (20CrMnTi)       │  600.0  │  0.30  │    2.0   │    300.0
│ z4(二级从动)│ 合金钢 (20CrMnTi)       │  600.0  │  0.30  │    2.0   │    300.0
│
│ 注: 标准20°压力角齿根厚系数 sf/m = 0.566
│
│ 【各齿轮弯曲应力与应力比详情】
│  第一级啮合 (z1-z2):
│    z1 主动轮: 34.4 MPa, 应力比=0.11
│    z2 从动轮: 33.3 MPa, 应力比=0.41 ← 应力比最大
│
│  第二级啮合 (z3-z4):
│    z3 主动轮: 101.1 MPa, 应力比=0.34
│    z4 从动轮: 95.8 MPa, 应力比=0.32
│
│ 【应力校核总结】
│ 最大应力位置: z3(二级主动)
│ 最大应力比位置: z2(一级从动)
│ 最大应力比: 0.41 ✓ 安全
│ 最大弯曲应力: 101.1 MPa
│ (各齿轮按自身材质许用应力校核)
│ 安全裕度: 2.46
└──────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────┐
│                         设计验证                         │
├──────────────────────────────────────────────────────┤
│ 轴距约束验证: ✓ 通过
│ 齿轮间隙验证 (((D1+D2)-(电机直径+D3)) > 1.0mm):
│   计算: ((19.80+72.00)-(75.00+14.40)) = 2.40 mm 【✓ 通过】
│ 低速级相对强度系数: 1.78 (>1.0表示低速级更强)
└──────────────────────────────────────────────────────┘

╔══════════════════════════════════════════════════════════╗
║                           设计完成                           ║
╚══════════════════════════════════════════════════════════╝



```